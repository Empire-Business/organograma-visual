---
## PARA CLAUDE (AI INSTRUCTIONS)

Este protocolo é invocado pelo comando `*ux` no CLAUDE.md.
Execute conforme as regras definidas no CLAUDE.md e em COMUNICACAO.md.
---

# Protocolo de UX Design (*ux)

## Quando Usar

- Criando fluxos de usuário
- Projetando telas e interfaces
- Melhorando experiência existente
- Resolvendo problemas de usabilidade
- Criando formulários
- Pensando em onboarding

---

## 10 Heurísticas de Nielsen

### 1. Visibilidade do Status do Sistema

```
✓ Mostre onde o usuário está
✓ Indique progresso em processos
✓ Loading states claros
✓ Feedback imediato para ações
```

**Exemplos:**
- Breadcrumb em navegação
- Barra de progresso em checkout
- Spinner enquanto carrega
- Toast após salvar

### 2. Correspondência com o Mundo Real

```
✓ Use linguagem do usuário (não técnica)
✓ Conceitos familiares
✓ Metáforas do mundo real
✓ Ordem lógica natural
```

**Exemplos:**
- "Carrinho de compras" (não "Container de Items")
- "Salvar" (não "Persistir")
- Ícone de lixeira para deletar

### 3. Controle e Liberdade do Usuário

```
✓ Undo/Redo disponível
✓ Cancelar operações
✓ Voltar facilmente
✓ Sair sem consequências
```

**Exemplos:**
- "Desfazer" após deletar
- Botão "Cancelar" em formulários
- Fechar modal sem salvar
- "Continuar de onde parou"

### 4. Consistência e Padrões

```
✓ Mesmo ícone = mesma ação
✓ Mesma cor = mesmo significado
✓ Posição de elementos previsível
✓ Seguir convenções da web
```

**Exemplos:**
- Logo sempre no topo esquerdo
- X sempre fecha
- Verde sempre = sucesso
- Botão primário sempre à direita

### 5. Prevenção de Erros

```
✓ Valide antes de processar
✓ Confirme ações destrutivas
✓ Previna entrada inválida
✓ Auto-save em formulários longos
```

**Exemplos:**
- "Tem certeza?" antes de deletar
- Máscara em campo de telefone
- Desabilitar botão se formulário inválido
- Limite de caracteres visível

### 6. Reconhecimento em vez de Memorização

```
✓ Opções visíveis (não escondidas)
✓ Informações contextuais
✓ Histórico recente
✓ Sugestões e autocompletar
```

**Exemplos:**
- Menu visível (não só hamburger)
- "Continuar de onde parou"
- "Itens recentes"
- Autocompletar com histórico

### 7. Flexibilidade e Eficiência

```
✓ Atalhos para usuários avançados
✓ Personalização
✓ Ações em lote
✓ Filtros e busca
```

**Exemplos:**
- Ctrl+S para salvar
- "Aplicar a todos"
- Filtros salvos
- Templates reutilizáveis

### 8. Design Estético e Minimalista

```
✓ Remova o desnecessário
✓ Hierarquia visual clara
✓ Espaço em branco
✓ Uma ação principal por tela
```

**Exemplos:**
- Não mostrar 20 opções no menu
- Destacar botão principal
- Não usar 5 cores diferentes
- Menos texto, mais ícones

### 9. Ajude Usuários a Reconhecer e Recuperar de Erros

```
✓ Mensagens claras (não códigos)
✓ Indique o que fazer
✓ Destaque o campo com erro
✓ Mantenha o que foi preenchido
```

**Exemplos:**
- "Email inválido" (não "Erro 400")
- "Verifique o campo em vermelho"
- "Esqueceu sua senha?"
- Não limpar formulário em erro

### 10. Ajuda e Documentação

```
✓ Help contextual
✓ Tooltips explicativos
✓ Onboarding para iniciantes
✓ FAQ acessível
```

**Exemplos:**
- "?" ao lado de campos complexos
- Tooltip em ícones
- Tour guiado no primeiro acesso
- "Como funciona" em cada seção

---

## Estados dos Componentes

### Estados Essenciais

```
DEFAULT    → Estado normal
HOVER      → Mouse em cima
FOCUS      → Selecionado pelo teclado
ACTIVE     → Sendo clicado
DISABLED   → Não disponível
LOADING    → Processando
ERROR      → Algo deu errado
SUCCESS    → Ação completada
EMPTY      → Sem dados
```

### Visual de Cada Estado

```tsx
// Botão
const buttonStates = {
  default: 'bg-primary-600',
  hover: 'bg-primary-700',
  focus: 'ring-2 ring-primary-500/50',
  active: 'bg-primary-800',
  disabled: 'bg-gray-300 cursor-not-allowed',
  loading: 'bg-primary-600 opacity-70',
}

// Input
const inputStates = {
  default: 'border-gray-300',
  focus: 'border-primary-500 ring-2 ring-primary-500/20',
  error: 'border-red-500',
  disabled: 'bg-gray-100',
}

// Card
const cardStates = {
  default: 'bg-white',
  hover: 'shadow-md',
  selected: 'border-primary-500',
}
```

---

## Formulários

### Boas Práticas

```
✓ Labels acima dos campos (não placeholder)
✓ Agrupar campos relacionados
✓ Ordem lógica (tabindex)
✓ Validação em tempo real ou no blur
✓ Mensagem de erro específica
✓ Botão de enviar desabilitado até válido
```

### Estrutura de Formulário

```tsx
<form>
  <fieldset> {/* Grupo: Informações Pessoais */}
    <legend>Informações Pessoais</legend>

    <FormField>
      <Label>Nome completo *</Label>
      <Input placeholder="Digite seu nome" />
      <HelperText>Como aparecerá no sistema</HelperText>
      <Error>Nome é obrigatório</Error>
    </FormField>

    <FormField error>
      <Label>Email *</Label>
      <Input type="email" />
      <Error>Digite um email válido</Error>
    </FormField>
  </fieldset>

  <Actions>
    <Button variant="secondary">Cancelar</Button>
    <Button variant="primary">Salvar</Button>
  </Actions>
</form>
```

### Validação

```tsx
// Quando mostrar erro?
const validationTiming = {
  onBlur: 'Após sair do campo',      // Mais comum
  onChange: 'Enquanto digita',       // Para campos sensíveis
  onSubmit: 'Ao enviar',             // Menos recomendado
}

// Mensagens de erro específicas
const errorMessages = {
  required: 'Este campo é obrigatório',
  email: 'Digite um email válido (exemplo@email.com)',
  minLength: 'Mínimo de {min} caracteres',
  maxLength: 'Máximo de {max} caracteres',
  password: 'A senha deve ter pelo menos 8 caracteres, uma letra e um número',
}
```

---

## Fluxos de Usuário

### Mapeamento Básico

```
1. O que o usuário quer fazer?
2. De onde ele vem?
3. O que precisa informar?
4. O que acontece depois?
5. Como ele sabe que deu certo?
```

### Exemplo: Fluxo de Compra

```
[Produto] → [Carrinho] → [Login/Cadastro] → [Endereço] → [Pagamento] → [Confirmação]

Em cada etapa:
- Mostrar onde está (breadcrumb/stepper)
- Permitir voltar
- Mostrar o que falta
- Manter dados preenchidos
```

### Stepper Component

```tsx
<Stepper current={2} total={4}>
  <Step>Carrinho</Step>
  <Step>Identificação</Step>
  <Step>Entrega</Step>
  <Step>Pagamento</Step>
</Stepper>
```

---

## Acessibilidade (a11y)

### Checklist Básico

```
□ Contraste mínimo 4.5:1 (texto normal)
□ Contraste mínimo 3:1 (texto grande)
□ Todos os elementos focáveis via teclado
□ Focus visible em todos os interativos
□ Alt text em todas as imagens
□ Labels em todos os campos
□ Não usar só cor para indicar algo
□ Tamanho mínimo de toque: 44x44px
```

### ARIA Labels

```tsx
// Botão só com ícone
<button aria-label="Fechar menu">
  <XIcon />
</button>

// Campo com descrição
<input aria-describedby="password-hint" />
<span id="password-hint">Mínimo 8 caracteres</span>

// Loading
<button aria-busy="true" aria-live="polite">
  Salvando...
</button>
```

### Focus Management

```tsx
// Focus no primeiro erro após submit
useEffect(() => {
  if (errors.length > 0) {
    firstErrorElementRef.current?.focus()
  }
}, [errors])

// Focus em modal ao abrir
useEffect(() => {
  if (isOpen) {
    firstFocusableElementRef.current?.focus()
  }
}, [isOpen])
```

---

## Mobile First

### Breakpoints Comuns

```css
/* Mobile first */
.container {
  padding: 1rem; /* Mobile */
}

@media (min-width: 640px) { /* sm */
  .container { padding: 2rem; }
}

@media (min-width: 768px) { /* md */
  .container { padding: 3rem; }
}

@media (min-width: 1024px) { /* lg */
  .container { padding: 4rem; }
}
```

### Touch-Friendly

```
□ Botões grandes (mín 44px)
□ Espaço entre elementos clicáveis
□ Não usar hover como única interação
□ Gestos intuitivos (swipe para deletar)
□ Formulários simples (menos campos)
```

---

## Checklist de UX

### Para cada tela:

```
□ Objetivo da tela é claro
□ Ação principal é óbvia
□ Navegação é intuitiva
□ Estados (loading, error, empty) tratados
□ Funciona sem JavaScript (básico)
□ Acessível via teclado
□ Responsivo
□ Textos são claros (sem jargão)
```

### Para formulários:

```
□ Campos agrupados logicamente
□ Labels claros
□ Validação helpful
□ Erros específicos
□ Pode voltar sem perder dados
□ Progresso visível (se longo)
```

---

## Resumo para Iniciantes

| Heurística | Tradução | Exemplo prático |
|------------|----------|-----------------|
| Visibilidade | Mostre o que está acontecendo | Loading spinner |
| Consistência | Mesma coisa funciona igual | X sempre fecha |
| Prevenção | Evite erros antes | Confirmar deletar |
| Reconhecimento | Não obrigue a memorizar | Menu visível |
| Minimalismo | Menos é mais | Uma ação principal |

**Lembre-se:** UX é sobre como o usuário SE SENTE usando seu produto. Se ele ficar frustrado, ele vai embora.
